@model GerenciadorDeEquipamentos.Models.Equipamentos

@{
    ViewBag.Title = "Gerenciar Equipamentos";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var total = ViewBag.total;
    var emManutencao = ViewBag.emManutencao;
    var ativos = ViewBag.ativos;
    var desativos = ViewBag.desativos;
}

<div class="content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-3 col-md-6 col-sm-6">
                <div class="card card-stats">
                    <a href="@Url.Action("ListarEquipamentos","Equipamento")" style="color:azure">

                        <div class="card-header card-header-info card-header-icon">
                            <div class="card-icon">
                                <i class="material-icons">desktop_windows</i>
                            </div>
                            <p class="card-category">Total de Equipamentos</p>
                            <h3 class="card-title">
                                @total
                            </h3>
                        </div>
                        <div class="card-footer">
                            <div class="stats">
                                <i class="material-icons">desktop_windows</i>
                                Total geral
                            </div>
                        </div>
                    </a>
                </div>
            </div>

            <div class="col-lg-3 col-md-6 col-sm-6">
                <div class="card card-stats">
                    <a href="@Url.Action("ListarEquipamentos","Equipamento", new { tipo = 1})" style="color:azure">

                        <div class="card-header card-header-warning card-header-icon">
                            <div class="card-icon">
                                <i class="material-icons">desktop_windows</i>
                            </div>
                            <p class="card-category">Equipamentos em Manutenção</p>
                            <h3 class="card-title">
                                @emManutencao
                            </h3>
                        </div>
                        <div class="card-footer">
                            <div class="stats">
                                <i class="material-icons">desktop_windows</i>
                                Total geral
                            </div>
                        </div>
                    </a>
                </div>
            </div>

            <div class="col-lg-3 col-md-6 col-sm-6">
                <div class="card card-stats">
                    <a href="@Url.Action("ListarEquipamentos","Equipamento", new { tipo = 2})" style="color:azure">

                        <div class="card-header card-header-success card-header-icon">
                            <div class="card-icon">
                                <i class="material-icons">desktop_windows</i>
                            </div>
                            <p class="card-category">Equipamentos Ativos</p>
                            <h3 class="card-title">
                                @ativos
                            </h3>
                        </div>
                        <div class="card-footer">
                            <div class="stats">
                                <i class="material-icons">desktop_windows</i>
                                Total geral
                            </div>
                        </div>
                    </a>
                </div>
            </div>

            <div class="col-lg-3 col-md-6 col-sm-6">
                <div class="card card-stats">
                    <a href="@Url.Action("ListarEquipamentos","Equipamento", new { tipo = 3})" style="color:azure">

                        <div class="card-header card-header-danger card-header-icon">
                            <div class="card-icon">
                                <i class="material-icons">desktop_windows</i>
                            </div>
                            <p class="card-category">Equipamentos Desativos</p>
                            <h3 class="card-title">
                                @desativos
                            </h3>
                        </div>
                        <div class="card-footer">
                            <div class="stats">
                                <i class="material-icons">desktop_windows</i>
                                Total geral
                            </div>
                        </div>
                    </a>
                </div>
            </div>
        </div>
        @if (HttpContext.Current.User.IsInRole("Administrador"))
        {
            <div class="row">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header card-header-icon card-header-primary">
                            <div class="card-icon">
                                <i class="material-icons">timeline</i>
                            </div>
                            <h4 class="card-title">
                                Gráfico Equipamentos
                                @*Equipamentos e OS *@
                                <small> - Por Depatamento</small>
                            </h4>
                        </div>
                        <div class="card-body">
                            <div id="colouredRoundedLineChart" class="ct-chart">
                                <div id="roundedLineChart" class="ct-chart">
                                    <div id="chartPie2" class="ct-chart-line" xmlns:ct="http://gionkunz.github.com/chartist-js/ct"
                                         width="100%" height="360px" style="width: 100%; height: 100%;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header card-header-icon card-header-primary">
                            <div class="card-icon">
                                <i class="material-icons">timeline</i>
                            </div>
                            <h4 class="card-title">
                                Gráfico Quantidade Equipamentos
                                @*Equipamentos e OS *@
                                <small> - Por Tipo</small>
                            </h4>
                        </div>
                        <div class="card-body">
                            <div id="colouredRoundedLineChart" class="ct-chart">
                                <div id="chartP" class="ct-chart-line" xmlns:ct="http://gionkunz.github.com/chartist-js/ct"
                                     width="100%" height="100%" style="width: 100%; height: 100%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }
        <div class="row">
            <div class="col-md">
                <div class="card">
                    <div class="card-body text-center">
                        <a href="@Url.Action("ListarTipoEquipamentos", "TipoEquipamento")" style="color:azure">
                            <div class="card-header card-header-primary card-header-icon">

                                <div class="card-icon">
                                    <i class="material-icons">devices</i>
                                </div>
                                <p class="card-category">Website Visits</p>
                                <h3 class="card-title mt-5">Tipo</h3>
                            </div>
                            <div class="card-footer">
                                <div class="stats">
                                    <i class="material-icons">assignment</i> Computador...
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-md">
                <div class="card">
                    <div class="card-body text-center">
                        <a href="@Url.Action("ListarAtributos","Atributo")" style="color:azure">
                            <div class="card-header card-header-primary card-header-icon">

                                <div class="card-icon">
                                    <i class="material-icons">memory</i>
                                </div>
                                <p class="card-category">Website Visits</p>
                                <h3 class="card-title mt-5">Atributos</h3>
                            </div>
                            <div class="card-footer">
                                <div class="stats">
                                    <i class="material-icons">assignment</i> RAN, Processador, etc...
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-md">
                <div class="card">
                    <div class="card-body text-center">
                        <a href="@Url.Action("ListarEspecificacoes","Especificacao")" style="color:azure">
                            <div class="card-header card-header-primary card-header-icon">

                                <div class="card-icon">
                                    <i class="material-icons">devices_other</i>
                                </div>
                                <p class="card-category">Website Visits</p>
                                <h3 class="card-title mt-5">Especificações</h3>
                            </div>
                            <div class="card-footer">
                                <div class="stats">
                                    <i class="material-icons">assignment</i> Quantidade de RAN, etc...
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-md">
                <div class="card">
                    <div class="card-body text-center">
                        <a href="@Url.Action("ListarDepartamentos", "Departamento")" style="color:azure">
                            <div class="card-header card-header-primary card-header-icon">

                                <div class="card-icon">
                                    <i class="material-icons">layers</i>
                                </div>
                                <p class="card-category">Website Visits</p>
                                <h3 class="card-title mt-5">Departamentos</h3>
                            </div>
                            <div class="card-footer">
                                <div class="stats">
                                    <i class="material-icons">assignment</i> Todos os departamentos
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<script>
    google.charts.load("current", { packages: ["corechart"] });
    google.charts.setOnLoadCallback(drawChartPie);

    var chartDataPie;

    $(document).ready(function () {

        $.ajax({
            url: "GetPieChartData",
            data: "",
            dataType: "json",
            type: "POST",
            contentType: "application/json; chartset=utf-8",
            success: function (data) {
                console.log(data);
                chartDataPie = data;
            },
            error: function (data) {
                console.log(data);
                alert("Erro carregando dados! Por favor tente novamente.")
            }
        }).done(function () {
            drawChartPie();
        });
    });

    function drawChartPie() {

        var data = google.visualization.arrayToDataTable(chartDataPie);

        var options = {
            chartArea: {
                height: 500
            }
        };

        var chart = new google.visualization.PieChart(document.getElementById('chartP'));
        chart.draw(data, options);
    }
</script>

<script>
    google.charts.load("current", { packages: ["corechart"] });
    google.charts.setOnLoadCallback(drawChartPie2);

    var chartDataPie2;

    $(document).ready(function () {

        $.ajax({
            url: "GetPie2ChartData",
            data: "",
            dataType: "json",
            type: "POST",
            contentType: "application/json; chartset=utf-8",
            success: function (data) {
                console.log(data);
                chartDataPie2 = data;
            },
            error: function (data) {
                console.log(data);
                alert("Erro carregando dados! Por favor tente novamente.")
            }
        }).done(function () {
            drawChartPie2();
        });
    });

    function drawChartPie2() {

        var data = google.visualization.arrayToDataTable(chartDataPie2);

        var options = {
            chartArea: {
                height: 500
            }
        };

        var chart = new google.visualization.PieChart(document.getElementById('chartPie2'));
        chart.draw(data, options);
    }
</script>
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}

